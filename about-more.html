<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>More about me — Portfolio</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* ===== Căn bản cho trang full-bleed ===== */
    .canvas { width: 100%; min-height: 100vh; aspect-ratio: auto; }
    .gallery-wrap { padding: 0; }
    .gallery-grid { display: block; }
    .gallery-card { margin: 0; border: 0; border-radius: 0; box-shadow: none; background: transparent; }
    .gallery-card img{
      display: block;
      width: 100vw;
      max-width: none;
      height: auto;
      margin-inline: calc(50% - 50vw);
    }
    .muted { opacity: .75; font-weight: 600; text-align: center; margin: 12px 0; }

    /* ===== Nút lên đầu trang (to-top) ===== */
    .to-top{
      position: fixed;
      right: clamp(12px, 2.2vw, 24px);
      bottom: clamp(12px, 2.2vw, 24px);
      z-index: 999;
      width: 56px; height: 56px;
      display: grid; place-items: center;
      border: 2px solid var(--ink);
      border-radius: 999px;
      background: var(--paper);
      color: var(--ink);
      font-weight: 900;
      font-size: 20px;
      text-decoration: none;
      box-shadow: 6px 6px 0 0 var(--ink);
      cursor: pointer;
      opacity: 0; transform: translateY(12px) scale(.96);
      transition: opacity .18s ease, transform .18s ease, box-shadow .12s ease;
    }
    .to-top.show{ opacity: 1; transform: translateY(0) scale(1); }
    .to-top:hover,
    .to-top:focus-visible{
      background:#000; color:#fff; border-color:#000;
      transform: translateY(-2px) scale(1.02);
      box-shadow: 10px 10px 0 0 var(--ink);
      outline: none;
    }
    .to-top:active{ transform: translateY(0) scale(.98); box-shadow: 4px 4px 0 0 var(--ink); }

    /* ===== Warp overlay (hiệu ứng “chạy trong không gian”) ===== */
    .warp{
      position: fixed; inset: 0;
      z-index: 998;                   /* dưới nút, trên ảnh */
      pointer-events: none;
      opacity: 0;
      transition: opacity .15s ease;
    }
    /* Hai lớp vệt sao chéo nhau tạo cảm giác tầng sâu */
    .warp::before,
    .warp::after{
      content:""; position: absolute; inset: -20% -10%; /* thò ra ngoài để khi zoom không lộ mép */
      background:
        repeating-linear-gradient( 25deg,
          transparent 0 18px, rgba(255,255,255,.88) 18px 20px, transparent 20px 72px),
        repeating-linear-gradient(-15deg,
          transparent 0 22px, rgba(255,255,255,.65) 22px 23px, transparent 23px 78px);
      filter: blur(0px);
      transform: scale(1) translate3d(0,0,0);
    }

    /* Trạng thái kích hoạt hiệu ứng */
    .warp.active{ opacity: 1; }
    .warp.active::before{
      animation: warpZoomA .9s cubic-bezier(.2,.6,.1,1) forwards;
    }
    .warp.active::after{
      animation: warpZoomB .9s cubic-bezier(.2,.6,.1,1) forwards;
    }

    /* Keyframes: phóng to + tịnh tiến background để tạo cảm giác lao nhanh */
    @keyframes warpZoomA{
      0%   { transform: scale(1);   filter: blur(0px); }
      30%  { transform: scale(1.25); filter: blur(1px); }
      100% { transform: scale(2.6);  filter: blur(2px); }
    }
    @keyframes warpZoomB{
      0%   { transform: scale(1);   filter: blur(0px); }
      30%  { transform: scale(1.15); filter: blur(.6px); }
      100% { transform: scale(2.2);  filter: blur(1.8px); }
    }

    /* Tôn trọng Reduce Motion */
    @media (prefers-reduced-motion: reduce){
      .warp, .warp::before, .warp::after{ animation: none !important; transition: none !important; }
      .to-top{ transition: none; }
    }
  </style>
</head>
<body>
  <main class="stage">
    <div class="canvas">
      <!-- back chips đồng bộ giao diện -->
      <div class="bottom-bar" style="position:static; padding:10px 16px 0; gap:12px; justify-content:flex-start;">
        <a class="nav-chip" href="about.html" style="transform:none; height:42px; box-shadow:4px 4px 0 0 var(--ink);">← Trang trước</a>
        <a class="nav-chip" href="index.html" style="transform:none; height:42px; box-shadow:4px 4px 0 0 var(--ink);">Trang chủ</a>
      </div>

      <section class="gallery-wrap">
        <p id="status" class="muted">Đang tải ảnh từ GitHub…</p>
        <div id="gallery" class="gallery-grid" aria-live="polite"></div>
      </section>
    </div>
  </main>

  <!-- Warp overlay + Nút to-top -->
  <div id="warp" class="warp" aria-hidden="true"></div>
  <button id="toTop" class="to-top" title="Lên đầu trang" aria-label="Lên đầu trang">↑</button>

  <script>
  (function(){
    /* ===== Nạp ảnh GitHub (giữ nguyên logic trước) ===== */
    const owner = 'nguyendangminh278-coder';
    const repo  = 'portfolio';
    const path  = '%E1%BA%A2nh%20main/About/More'; // "Ảnh main/About/More"
    const ref   = '59c638f1991ae504d982967310bad05ecfeebcc9';
    const api = `https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${ref}`;

    const gallery = document.getElementById('gallery');
    const status  = document.getElementById('status');

    const natCmp = (a,b) => a.localeCompare(b, undefined, { numeric:true, sensitivity:'base' });

    function addCard(item){
      const fig = document.createElement('figure');
      fig.className = 'gallery-card';
      const img = document.createElement('img');
      img.loading = 'lazy';
      img.alt = item.name || 'about image';
      img.src = item.download_url;
      fig.appendChild(img);
      gallery.appendChild(fig);
    }

    fetch(api)
      .then(r => { if(!r.ok) throw new Error(`GitHub API: ${r.status}`); return r.json(); })
      .then(list => {
        const imgs = list
          .filter(x => x.type === 'file' && /\.(png|jpe?g|webp|gif|avif)$/i.test(x.name))
          .sort((a,b) => natCmp(a.name,b.name));
        if(!imgs.length){ status.textContent = 'Không tìm thấy ảnh trong thư mục.'; return; }
        status.remove();
        imgs.forEach(addCard);
      })
      .catch(err => { console.error(err); status.textContent = 'Không tải được ảnh từ GitHub.'; });

    /* ===== Nút lên đầu trang + hiệu ứng warp ===== */
    const btn   = document.getElementById('toTop');
    const warp  = document.getElementById('warp');
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // Hiện nút khi cuộn xuống
    const onScroll = () => {
      if (window.scrollY > 300) btn.classList.add('show');
      else btn.classList.remove('show');
    };
    window.addEventListener('scroll', onScroll, { passive: true });
    onScroll();

    // Click: chạy warp + cuộn mượt lên đầu
    btn.addEventListener('click', () => {
      if (!prefersReduced) {
        warp.classList.add('active');
        // tắt warp sau 0.9s (khớp keyframes)
        setTimeout(() => warp.classList.remove('active'), 920);
      }
      window.scrollTo({ top: 0, behavior: prefersReduced ? 'auto' : 'smooth' });
    }, { passive: true });
  })();
  </script>
</body>
</html>
